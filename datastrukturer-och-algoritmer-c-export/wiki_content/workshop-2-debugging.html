<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Workshop 2 - Debugging</title>
<meta name="identifier" content="g96cd3b4e177ea15f0b08125fa73445bc"/>
<meta name="editing_roles" content="teachers"/>
<meta name="workflow_state" content="active"/>
</head>
<body>

<div id="outline-container-orgaff195f" class="outline-2">
<h2 id="orgaff195f">Syftet med workshop 2</h2>
<div class="outline-text-2" id="text-orgaff195f">
<ul class="org-ul">
<li>Ni ska känna er bekväma med att hantera en grafisk debugger för att
hitta fel i koden.
<ul class="org-ul">
<li>Vi kommer att visa debuggern <code>nemiver</code>.</li>
<li>Ni får använda vilken debugger ni vill.
<ul class="org-ul">
<li>Det är möjligt att konfigurera t.ex. VSCode till att använda som
debugger, men det får ni i så fall fixa själva.</li>
</ul></li>
</ul></li>
<li>Workshop 3 kommer introducera <code>valgrind</code> för att hitta minnesläckor
i koden. Notera att <code>valgrind</code> inte fungerar under MacOS.</li>
<li>Förhoppningen är att det ska hjälpa er på labbarna framöver.</li>
</ul>
</div>
</div>

<div id="outline-container-org882a85f" class="outline-2">
<h2 id="org882a85f">Lite teori</h2>
<div class="outline-text-2" id="text-org882a85f">
</div>
<div id="outline-container-orgb984119" class="outline-3">
<h3 id="orgb984119">Olika typer av fel i program</h3>
<div class="outline-text-3" id="text-orgb984119">
<ul class="org-ul">
<li>Syntaxfel:
<ul class="org-ul">
<li>Upptäcks av kompilatorn.</li>
</ul></li>
<li>Programkörningsfel (<i>run-time error</i>):
<ul class="org-ul">
<li>Koden är syntaktiskt korrekt men programmet kraschar när man kör
det.</li>
</ul></li>
<li>Logiska fel:
<ul class="org-ul">
<li>Koden är syntaktiskt korrekt och programmet kör som det ska men
resultatet blir inte det du tänkt dig.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgc945589" class="outline-3">
<h3 id="orgc945589">Hur hittar man orsakerna till fel?</h3>
<div class="outline-text-3" id="text-orgc945589">
<ul class="org-ul">
<li>Läsa meddelanden från kompilator, koden och
kommentarerna en extra gång
<ul class="org-ul">
<li>OBS! Se till att läsa det <b>första</b> felmeddelandet först!</li>
</ul></li>
<li>Lägga till spårutskrifter i programmet.</li>
<li>Använda en <b>Debugger</b>.</li>
</ul>
</div>
</div>
<div id="outline-container-org7771b99" class="outline-3">
<h3 id="org7771b99">Debugger</h3>
<div class="outline-text-3" id="text-org7771b99">
<ul class="org-ul">
<li>En debugger gör det möjligt att
<ul class="org-ul">
<li><b>Stega igenom</b> koden rad för rad (<i>single-step</i>).</li>
<li>Följa variablers <b>värden</b> och hur de <b>förändras</b> under körning (<i>watch</i>).</li>
<li><b>Förändra</b> variablers värden under körning.</li>
<li>Sätta <b>brytpunkter</b> (<i>breakpoints</i>) som bestämmer var exekveringen
ska stanna.</li>
</ul></li>
<li>Under stegningen kan man välja mellan att
<ul class="org-ul">
<li><b>gå in</b> i funktioner/subrutiner/procedurer (<i>step in</i>),</li>
<li>att <b>gå förbi</b> funktioner/subrutiner/procedurer (<i>step over</i>),</li>
<li><b>hoppa ut</b> ur en funktioner/subrutiner/procedurer (<i>step out</i>).</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgf291ebf" class="outline-3">
<h3 id="orgf291ebf">Tips inför debugging</h3>
<div class="outline-text-3" id="text-orgf291ebf">
<ul class="org-ul">
<li>Gör lite detektivarbete för att försöka att ringa in felet:
<ul class="org-ul">
<li>Testa olika argument till programmet/funktionen. Är det några som
fungerar?</li>
<li>Händer ingenting? Kanske en oändlig loop.</li>
<li>Kraschar det med segmentation fault? Låter som pekar-fel (här kan
<code>valgrind</code> hjälpa).</li>
</ul></li>
<li>Sätt breakpoints där du misstänker att nånting går fel</li>
<li>Försök inte gissa felet slumpmässigt, då slösar du bara tid.</li>
<li>Tänk till när du fixar en bugg. Har du löst hela problemet eller
måste du göra nåt mer?
<ul class="org-ul">
<li>Undvik att göra massa små inkrementella ändringar för att se när
felet försvinner.</li>
<li>Kontrollera så att du inte skapat en ny bugg</li>
</ul></li>
<li>Har du jagat samma bug länge? Trött? Kanske bra att ta en paus?</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgda3cb75" class="outline-2">
<h2 id="orgda3cb75">Övningar</h2>
<div class="outline-text-2" id="text-orgda3cb75">
</div>
<div id="outline-container-org27dd7fb" class="outline-3">
<h3 id="org27dd7fb">Övning 0 – kör exemplet från workshop 1</h3>
<div class="outline-text-3" id="text-org27dd7fb">
<ul class="org-ul">
<li><p>
Kompilera koden <code>int_list_mwe.c</code> från workshop 1. Observera att flaggan <code>-g</code> måste vara med.
</p>
<pre class="example" id="orgb2d53a6">niclas@earth:~$ cd edu/doa/datastructures-v1.0.14.3/src/int_list
niclas@earth:~/edu/doa/datastructures-v1.0.14.3/src/int_list$ gcc -g -o int_list_mwe -I ../../include/ int_list_mwe.c int_list.c 
</pre></li>
<li><p>
Starta den exekverbara filen med debuggern:
</p>
<pre class="example" id="org2ce0454">niclas@earth:~/edu/doa/datastructures-v1.0.14.3/src/int_list$ nemiver ./int_list_mwe
</pre>
<ul class="org-ul">
<li>Debuggern <code>nemiver</code> kommer att starta och du får en gul pil vid
den öppnande måsvingen i <code>main()</code>.</li>
<li>Den gula pilen visar aktuell rad, dvs. raden som ska köras.</li>
<li>Den röda bollen vid radnumret på en rad visar att en <i>breakpoint</i>
är satt på den raden. Ni sätter och tar bort <i>breakpoints</i> genom
att använda tangenten <code>F8</code>. Ni kan också klicka i den vänstraste
kolumnen (där bollen finns).</li>
<li>Tangenterna <code>F6</code> och <code>F7</code> kan användas för att stega framåt, en
rad i taget.
<ul class="org-ul">
<li>Tangenten <code>F7</code> (<i>Step</i> eller <i>Step into</i>) kör koden på aktuell
rad. Om raden innehåller ett funktionsanrop så hoppar <code>nemiver</code>
till första exekverbara rad i den funktionen.</li>
<li>Tangenten <code>F6</code> (<i>Next</i> eller <i>Step over</i>) gör samma sak men
hoppar <i>inte</i> in i en funktion.</li>
<li>Om du hoppar in i en funktion av misstag kan du använda
tangenten <code>Shift-F7</code> (<i>Step out</i>) till att hoppa ur en
funktion. Det är speciellt användbart om du trycker <code>F7</code> på en
inbyggd funktion, t.ex. <code>printf</code>, som saknar källkod. (Du kan
behöva trycka på <i>Cancel</i> i några dialoger först.)</li>
</ul></li>
<li>Om du vill köra programmet tills det terminerar alt. kommer till
nästa breakpoint kan du använda tangenten <code>F5</code> (<i>Continue</i>). Vill
du start om programmet kan du använda <code>Shift-F5</code> (<i>Run or
Restart</i>).</li>
</ul></li>
<li>Inuti <code>nemiver</code>, bekanta er med panelerna längst ner, speciellt följande två:
<dl class="org-dl">
<dt><code>Target Terminal</code></dt><dd>Visar utskrifterna som ditt program gör.
<ul class="org-ul">
<li>Det är också här du ska mata in svar om ditt program vill ha
input från användaren.</li>
</ul></dd>
<dt><code>Context</code></dt><dd>Visar värden på lokala variabler och hur de förändras
under exekveringen.
<ul class="org-ul">
<li>Det är också möjligt att förändra lokala variablers värden.</li>
<li>Det gör du genom att dubbelklicka i <code>Value</code>-kolumnen och sedan
mata in det nya värdet.</li>
</ul></dd>
</dl></li>
</ul>


<ol class="org-ol">
<li>Stega dig igenom hela exemplet med <code>F6</code>, <code>F7</code>, <code>Shift-F7</code> och
<code>F5</code>. Bevaka vad som händer i <code>Target Terminal</code>-panelen. Testa vad
som händer om du trycker <code>F7</code> på en <code>printf</code>-rad (kom ihåg
<code>Shift-F7</code>).</li>
<li>Starta om programmet och följ nu vad som händer i
<code>Context</code>-panelen, speciellt när du hoppar i och ur funktioner.</li>
<li>Starta om programmet igen. Se om du kan använda <code>Context</code>-panelen
till att få programmet att lägga in värdet 11 först i listan i
stället för värdet 5!</li>
</ol>
</div>
</div>

<div id="outline-container-org4da92ab" class="outline-3">
<h3 id="org4da92ab">Övning 1–3 — programfel</h3>
<div class="outline-text-3" id="text-org4da92ab">
<p>
För dessa övningar ska du försöka lokalisera <b>logiska fel</b> i programmen.
</p>

<ol class="org-ol">
<li>För varje övning, ladda hem något av programmen <code>bug1.c</code>, <code>bug2.c</code>
eller <code>bug3.c</code> från /Filer/Workshops/WS2.</li>
<li>Kompilera koden som beskrivits ovan. Du behöver inte inkludera
kodbasen i kompileringen. Kom ihåg flaggan <code>-g</code>.  koden än.</li>
<li>Kör koden i debuggern. Se om du kan upptäcka och fixa buggarna!</li>
<li>Lösningar finns i <code>Filer/Workshops/WS2/korrekt kod</code>.</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org42b1a69" class="outline-2">
<h2 id="org42b1a69">Dokumenthistorik</h2>
<div class="outline-text-2" id="text-org42b1a69">
<dl class="org-dl">
<dt>v1.0 2024-03-19</dt><dd>Uppdaterade fjolårets version. Nu helt fokuserad
på <code>nemiver</code>.</dd>
</dl>
</div>
</div>

</body>
</html>